# Flutter æ’ä»¶å¼€å‘å®Œæ•´æŒ‡å— - OMRON Health Plugin

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† OMRON Health Plugin çš„å¼€å‘è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ Flutter æ’ä»¶å¼€å‘çš„ä¸€èˆ¬æµç¨‹ã€ç¬¬ä¸‰æ–¹ SDK é›†æˆæ–¹æ³•ä»¥åŠæ’ä»¶å‘å¸ƒæµç¨‹ã€‚

---

## ç›®å½•

- [ä¸€ã€Flutter æ’ä»¶å¼€å‘ä¸€èˆ¬æµç¨‹](#ä¸€flutter-æ’ä»¶å¼€å‘ä¸€èˆ¬æµç¨‹)
- [äºŒã€é›†æˆç¬¬ä¸‰æ–¹ SDK](#äºŒé›†æˆç¬¬ä¸‰æ–¹-sdk)
  - [2.1 Android ç«¯é›†æˆ OmronBleSdk.jar](#21-android-ç«¯é›†æˆ-omronblesdkjar)
  - [2.2 iOS ç«¯é›†æˆ OMRONLib.framework](#22-ios-ç«¯é›†æˆ-omronlibframework)
  - [2.3 æƒé™é…ç½®](#23-æƒé™é…ç½®)
- [ä¸‰ã€æ’ä»¶å‘å¸ƒæµç¨‹](#ä¸‰æ’ä»¶å‘å¸ƒæµç¨‹)
- [å››ã€å®Œæ•´å¼€å‘å·¥ä½œæµæ€»ç»“](#å››å®Œæ•´å¼€å‘å·¥ä½œæµæ€»ç»“)
- [äº”ã€å…³é”®æ³¨æ„äº‹é¡¹](#äº”å…³é”®æ³¨æ„äº‹é¡¹)

---

## ä¸€ã€Flutter æ’ä»¶å¼€å‘ä¸€èˆ¬æµç¨‹

### 1.1 åˆ›å»ºæ’ä»¶é¡¹ç›®

```bash
# åˆ›å»ºæ’ä»¶è„šæ‰‹æ¶
flutter create --org top.inomo --template=plugin --platforms=android,ios -i swift -a kotlin  omron_health_plugin

# é¡¹ç›®ç»“æ„
omron_health_plugin/
â”œâ”€â”€ lib/                    # Dart å±‚ä»£ç 
â”‚   â”œâ”€â”€ omron_health_plugin.dart          # ä¸»å…¥å£
â”‚   â”œâ”€â”€ omron_health_plugin_platform_interface.dart  # å¹³å°æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ omron_health_plugin_method_channel.dart      # MethodChannel å®ç°
â”‚   â””â”€â”€ omron/                                        # æ•°æ®æ¨¡å‹
â”œâ”€â”€ android/                # Android åŸç”Ÿä»£ç 
â”‚   â””â”€â”€ src/main/kotlin/
â”œâ”€â”€ ios/                    # iOS åŸç”Ÿä»£ç 
â”‚   â””â”€â”€ Classes/
â””â”€â”€ example/                # ç¤ºä¾‹åº”ç”¨
```

### 1.2 å®šä¹‰å¹³å°æ¥å£å±‚

**ç›®çš„ï¼š** ä¸ºä¸åŒå¹³å°æä¾›ç»Ÿä¸€çš„æŠ½è±¡æ¥å£

```dart
// lib/omron_health_plugin_platform_interface.dart
abstract class OmronHealthPluginPlatform extends PlatformInterface {
  static OmronHealthPluginPlatform _instance = MethodChannelOmronHealthPlugin();
  
  static OmronHealthPluginPlatform get instance => _instance;
  
  // å®šä¹‰æŠ½è±¡æ–¹æ³•
  Future<OmronResult> initSdk();
  Future<OmronResult> register({required OmronConfig config});
  Stream<OmronScanEvent> startBindScan(OmronDeviceCategory category, {int timeout = 60});
  // ... å…¶ä»–æ–¹æ³•
}
```

**æ¶æ„ä¼˜åŠ¿ï¼š**
- åˆ†ç¦»æ¥å£å®šä¹‰å’Œå®ç°
- ä¾¿äºæµ‹è¯•ï¼ˆå¯ä»¥ mock å®ç°ï¼‰
- æ”¯æŒå¤šå¹³å°æ‰©å±•

### 1.3 å®ç° MethodChannel é€šä¿¡å±‚

**é€šé“ç±»å‹ï¼š**
- **MethodChannel**: ç”¨äºå¼‚æ­¥æ–¹æ³•è°ƒç”¨ï¼ˆå¦‚åˆå§‹åŒ–ã€æ³¨å†Œï¼‰
- **EventChannel**: ç”¨äºæŒç»­çš„æ•°æ®æµï¼ˆå¦‚è®¾å¤‡æ‰«æã€çŠ¶æ€ç›‘å¬ï¼‰

```dart
// lib/omron_health_plugin_method_channel.dart
class MethodChannelOmronHealthPlugin extends OmronHealthPluginPlatform {
  // Method Channel - ç”¨äºæ–¹æ³•è°ƒç”¨
  final methodChannel = const MethodChannel('top.inomo.omron_health_plugin/omron');
  
  // Event Channels - ç”¨äºäº‹ä»¶æµ
  final statusEventChannel = const EventChannel('top.inomo.omron_health_plugin/omron_status');
  final scanEventChannel = const EventChannel('top.inomo.omron_health_plugin/omron_scan');
  final syncScanEventChannel = const EventChannel('top.inomo.omron_health_plugin/omron_sync_scan');
  
  @override
  Future<OmronResult> initSdk() async {
    final result = await methodChannel.invokeMethod('initSdk');
    return OmronResult.fromMap(result);
  }
  
  @override
  Stream<OmronScanEvent> startBindScan(
    OmronDeviceCategory category, {
    int timeout = 60,
  }) {
    // 1. è§¦å‘åŸç”Ÿå±‚å¼€å§‹æ‰«æ
    methodChannel.invokeMethod('startBindScan', {
      'categoryValue': category.value,
      'timeout': timeout,
    });
    
    // 2. è¿”å›äº‹ä»¶æµï¼Œç›‘å¬æ‰«æç»“æœ
    return scanEventChannel.receiveBroadcastStream().map((event) {
      return OmronScanEvent.fromMap(event as Map<Object?, Object?>);
    });
  }
}
```

**é€šä¿¡æµç¨‹ï¼š**
```
Dart Layer          Native Layer
    |                    |
    |-- invokeMethod --> |  (è§¦å‘æ“ä½œ)
    |                    |
    |<-- EventSink ----- |  (æŒç»­è¿”å›æ•°æ®)
    |<-- EventSink ----- |
    |<-- EventSink ----- |
```

### 1.4 å®ç° Android åŸç”Ÿå±‚

```kotlin
// android/src/main/kotlin/.../OmronHealthPlugin.kt
class OmronHealthPlugin : FlutterPlugin, MethodCallHandler {
    private lateinit var methodChannel: MethodChannel
    private lateinit var scanEventChannel: EventChannel
    private var scanEventSink: EventChannel.EventSink? = null
    private val mainHandler = Handler(Looper.getMainLooper())
    
    // 1. æ³¨å†Œæ’ä»¶
    override fun onAttachedToEngine(flutterPluginBinding: FlutterPluginBinding) {
        val messenger = flutterPluginBinding.binaryMessenger
        
        // æ³¨å†Œ Method Channel
        methodChannel = MethodChannel(messenger, "top.inomo.omron_health_plugin/omron")
        methodChannel.setMethodCallHandler(this)
        
        // æ³¨å†Œ Event Channel
        scanEventChannel = EventChannel(messenger, "top.inomo.omron_health_plugin/omron_scan")
        scanEventChannel.setStreamHandler(object : EventChannel.StreamHandler {
            override fun onListen(arguments: Any?, events: EventChannel.EventSink?) {
                scanEventSink = events
            }
            override fun onCancel(arguments: Any?) {
                scanEventSink = null
            }
        })
    }
    
    // 2. å¤„ç†æ–¹æ³•è°ƒç”¨
    override fun onMethodCall(call: MethodCall, result: Result) {
        when (call.method) {
            "initSdk" -> initSdk(result)
            "register" -> register(call.arguments, result)
            "startBindScan" -> startBindScan(call.arguments, result)
            else -> result.notImplemented()
        }
    }
    
    // 3. å®ç°å…·ä½“æ–¹æ³•
    private fun startBindScan(params: Any?, result: Result) {
        val args = params as? Map<String, Any?>
        val categoryValue = args?.get("categoryValue") as? Int ?: 0
        val timeout = args?.get("timeout") as? Int ?: 60
        
        // è°ƒç”¨ OMRON SDK
        OMRONLib.getInstance().startBindScan(category, timeout, 
            object : BleScanDeviceCallback {
                override fun onBleScan(device: BleScanDevice?, rssi: Int, scanRecord: ByteArray?) {
                    // åœ¨ä¸»çº¿ç¨‹å‘é€äº‹ä»¶åˆ° Flutter
                    mainHandler.post {
                        scanEventSink?.success(mapOf(
                            "deviceName" to device?.name,
                            "deviceSerialNum" to device?.address,
                            "rssi" to rssi
                        ))
                    }
                }
                
                override fun onCycleEnd() {
                    mainHandler.post {
                        scanEventSink?.success(mapOf("isFinished" to true))
                    }
                }
                
                override fun onBleScanFailure(errMsg: OMRONBLEErrMsg?) {
                    mainHandler.post {
                        scanEventSink?.error("SCAN_FAILED", errMsg?.name, null)
                    }
                }
            })
        
        result.success(mapOf("success" to true))
    }
    
    // 4. æ¸…ç†èµ„æº
    override fun onDetachedFromEngine(binding: FlutterPluginBinding) {
        methodChannel.setMethodCallHandler(null)
        scanEventSink = null
    }
}
```

**å…³é”®ç‚¹ï¼š**
- ä½¿ç”¨ `Handler(Looper.getMainLooper())` ç¡®ä¿åœ¨ä¸»çº¿ç¨‹å‘é€äº‹ä»¶
- EventChannel éœ€è¦å®ç° `StreamHandler` æ¥å£
- åŠæ—¶æ¸…ç†èµ„æºé¿å…å†…å­˜æ³„æ¼

### 1.5 å®ç° iOS åŸç”Ÿå±‚

```swift
// ios/Classes/OmronHealthPlugin.swift
import Flutter
import UIKit
import OMRONLib

public class OmronHealthPlugin: NSObject, FlutterPlugin, FlutterStreamHandler {
    private var methodChannel: FlutterMethodChannel?
    private var scanEventChannel: FlutterEventChannel?
    private var scanEventSink: FlutterEventSink?
    
    // 1. æ³¨å†Œæ’ä»¶
    public static func register(with registrar: FlutterPluginRegistrar) {
        let instance = OmronHealthPlugin()
        
        // æ³¨å†Œ Method Channel
        let methodChannel = FlutterMethodChannel(
            name: "top.inomo.omron_health_plugin/omron", 
            binaryMessenger: registrar.messenger()
        )
        registrar.addMethodCallDelegate(instance, channel: methodChannel)
        instance.methodChannel = methodChannel
        
        // æ³¨å†Œ Event Channel
        let scanEventChannel = FlutterEventChannel(
            name: "top.inomo.omron_health_plugin/omron_scan",
            binaryMessenger: registrar.messenger()
        )
        scanEventChannel.setStreamHandler(instance)
        instance.scanEventChannel = scanEventChannel
    }
    
    // 2. å¤„ç†æ–¹æ³•è°ƒç”¨
    public func handle(_ call: FlutterMethodCall, result: @escaping FlutterResult) {
        switch call.method {
        case "initSdk":
            initSdk(result: result)
        case "register":
            register(arguments: call.arguments, result: result)
        case "startBindScan":
            startBindScan(arguments: call.arguments, result: result)
        default:
            result(FlutterMethodNotImplemented)
        }
    }
    
    // 3. å®ç° StreamHandler
    public func onListen(withArguments arguments: Any?, eventSink events: @escaping FlutterEventSink) -> FlutterError? {
        scanEventSink = events
        return nil
    }
    
    public func onCancel(withArguments arguments: Any?) -> FlutterError? {
        scanEventSink = nil
        return nil
    }
    
    // 4. å®ç°å…·ä½“æ–¹æ³•
    private func startBindScan(arguments: Any?, result: @escaping FlutterResult) {
        guard let args = arguments as? [String: Any],
              let categoryValue = args["categoryValue"] as? Int,
              let timeout = args["timeout"] as? Int else {
            result(FlutterError(code: "INVALID_ARGUMENTS", 
                               message: "å‚æ•°é”™è¯¯", 
                               details: nil))
            return
        }
        
        // è°ƒç”¨ OMRON SDK
        OMRONLib.shared.startBindScan(category: category, timeout: timeout) { [weak self] device, rssi in
            // åœ¨ä¸»çº¿ç¨‹å‘é€äº‹ä»¶
            DispatchQueue.main.async {
                self?.scanEventSink?([
                    "deviceName": device?.name ?? "",
                    "deviceSerialNum": device?.serialNum ?? "",
                    "rssi": rssi
                ])
            }
        } onFinish: { [weak self] in
            DispatchQueue.main.async {
                self?.scanEventSink?(["isFinished": true])
            }
        } onError: { [weak self] error in
            DispatchQueue.main.async {
                self?.scanEventSink?(FlutterError(code: "SCAN_FAILED", 
                                                  message: error.localizedDescription, 
                                                  details: nil))
            }
        }
        
        result(["success": true])
    }
}
```

**å…³é”®ç‚¹ï¼š**
- ä½¿ç”¨ `DispatchQueue.main.async` ç¡®ä¿ä¸»çº¿ç¨‹å›è°ƒ
- `FlutterEventSink` ç”¨äºå‘é€äº‹ä»¶æµ
- ä½¿ç”¨ `weak self` é¿å…å¾ªç¯å¼•ç”¨

---

## äºŒã€é›†æˆç¬¬ä¸‰æ–¹ SDK

### 2.1 Android ç«¯é›†æˆ OmronBleSdk.jar

#### æ­¥éª¤ 1: å‡†å¤‡ JAR æ–‡ä»¶

```bash
# è¿›å…¥ Android ç›®å½•
cd android

# åˆ›å»º libs ç›®å½•
mkdir -p libs

# å°† OmronBleSdk.jar å¤åˆ¶åˆ° libs ç›®å½•
cp /path/to/OmronBleSdk.jar libs/

# éªŒè¯æ–‡ä»¶
ls -lh libs/OmronBleSdk.jar
```

**ç›®å½•ç»“æ„ï¼š**
```
android/
â”œâ”€â”€ build.gradle          # â­ åœ¨è¿™é‡Œé…ç½®ä¾èµ–
â”œâ”€â”€ libs/
â”‚   â””â”€â”€ OmronBleSdk.jar  # â­ JAR æ–‡ä»¶æ”¾è¿™é‡Œ
â””â”€â”€ src/
    â””â”€â”€ main/
        â””â”€â”€ kotlin/
            â””â”€â”€ OmronPlugin.kt
```

#### æ­¥éª¤ 2: ä¿®æ”¹ build.gradle

```gradle
// android/build.gradle
group = "top.inomo.omron_health_plugin"
version = "1.0-SNAPSHOT"

buildscript {
    ext.kotlin_version = "2.1.0"
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath("com.android.tools.build:gradle:8.9.1")
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version")
    }
}

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

apply plugin: "com.android.library"
apply plugin: "kotlin-android"

android {
    namespace = "top.inomo.omron_health_plugin"
    compileSdk = 36
    
    defaultConfig {
        minSdk = 24
        targetSdk = 36
    }
    
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }
    
    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_11
    }
    
    sourceSets {
        main.java.srcDirs += "src/main/kotlin"
        test.java.srcDirs += "src/test/kotlin"
    }
}

dependencies {
    // â­ æ–¹å¼ 1: å¼•å…¥æ•´ä¸ª libs ç›®å½•çš„æ‰€æœ‰ JAR
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    
    // â­ æ–¹å¼ 2: æ˜ç¡®æŒ‡å®šå•ä¸ª JAR æ–‡ä»¶ï¼ˆæ¨èï¼‰
    // implementation files('libs/OmronBleSdk.jar')
    
    // â­ OMRON SDK ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“
    implementation 'com.google.code.gson:gson:2.10.1'
    implementation 'commons-codec:commons-codec:1.15'
    implementation 'com.squareup.okhttp3:okhttp:4.10.0'
    
    // æµ‹è¯•ä¾èµ–
    testImplementation("org.jetbrains.kotlin:kotlin-test")
    testImplementation("org.mockito:mockito-core:5.0.0")
}
```

#### æ­¥éª¤ 3: é…ç½®æ··æ·†è§„åˆ™ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨çš„åº”ç”¨å¯ç”¨äº†ä»£ç æ··æ·†ï¼ˆProGuard/R8ï¼‰ï¼Œéœ€è¦æ·»åŠ æ··æ·†è§„åˆ™ï¼š

```proguard
# android/proguard-rules.pro
# ä¿ç•™ OMRON SDK ç±»
-keep class com.omron.lib.** { *; }
-dontwarn com.omron.lib.**

# å¦‚æœ SDK ä½¿ç”¨äº†åå°„
-keepattributes Signature
-keepattributes *Annotation*
```

åœ¨ `android/build.gradle` ä¸­å¼•ç”¨ï¼š

```gradle
android {
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}
```

#### æ­¥éª¤ 4: åœ¨ Kotlin ä»£ç ä¸­ä½¿ç”¨

```kotlin
// android/src/main/kotlin/.../OmronPlugin.kt
package top.inomo.omron_health_plugin.plugins.omron

// â­ å¯¼å…¥ OMRON SDK ç±»
import com.omron.lib.OMRONLib
import com.omron.lib.BleScanDevice
import com.omron.lib.device.DeviceInfo
import com.omron.lib.device.DeviceCategory
import com.omron.lib.model.BPData
import com.omron.lib.common.OMRONBLEErrMsg
import com.omron.lib.BleScanDeviceCallback
import com.omron.lib.device.bp.OmronBpBleCallBack

class OmronPlugin(private val context: Context) {
    
    // åˆå§‹åŒ– SDK
    fun initSdk() {
        OMRONLib.init(context)
    }
    
    // æ³¨å†Œ SDK
    fun register(appKey: String, packageName: String, packageSecret: String) {
        OMRONLib.getInstance().requestIdentifier(
            appKey,
            packageSecret,
            packageName,
            "",  // license
            "",  // thirdUserId
            object : com.omron.lib.IdentifierCallback {
                override fun onSuccess() {
                    // æ³¨å†ŒæˆåŠŸ
                }
                override fun onFail(errMsg: OMRONBLEErrMsg?) {
                    // æ³¨å†Œå¤±è´¥
                }
            }
        )
    }
    
    // æ‰«æè®¾å¤‡
    fun startBindScan(category: DeviceCategory, timeout: Int, callback: BleScanDeviceCallback) {
        OMRONLib.getInstance().startBindScan(category, timeout, callback)
    }
}
```

#### æ­¥éª¤ 5: éªŒè¯é›†æˆ

```bash
# æ¸…ç†æ„å»º
cd example
flutter clean

# é‡æ–°è·å–ä¾èµ–
flutter pub get

# ç¼–è¯‘ Android
flutter build apk --debug

# å¦‚æœç¼–è¯‘æˆåŠŸï¼Œè¯´æ˜ JAR é›†æˆæ­£ç¡®
```

---

### 2.2 iOS ç«¯é›†æˆ OMRONLib.framework

#### æ­¥éª¤ 1: å‡†å¤‡ Framework æ–‡ä»¶

```bash
# è¿›å…¥ iOS ç›®å½•
cd ios

# åˆ›å»º Frameworks ç›®å½•
mkdir -p Frameworks

# å°† OMRONLib.framework å¤åˆ¶åˆ°ç›®å½•
cp -r /path/to/OMRONLib.framework Frameworks/

# éªŒè¯ Framework ç»“æ„
ls -la Frameworks/OMRONLib.framework/
```

**æœŸæœ›çš„ Framework ç»“æ„ï¼š**
```
OMRONLib.framework/
â”œâ”€â”€ OMRONLib              # äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰
â”œâ”€â”€ Headers/              # å¤´æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ OMRONLib.h
â”‚   â””â”€â”€ OmronDefines.h
â”œâ”€â”€ Info.plist            # Framework ä¿¡æ¯
â”œâ”€â”€ Modules/              # æ¨¡å—å®šä¹‰
â”‚   â””â”€â”€ module.modulemap
â””â”€â”€ Resources/            # èµ„æºæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
```

**æ£€æŸ¥ Framework æ¶æ„ï¼š**
```bash
# æŸ¥çœ‹æ”¯æŒçš„æ¶æ„
lipo -info Frameworks/OMRONLib.framework/OMRONLib

# è¾“å‡ºç¤ºä¾‹ï¼ˆä»…çœŸæœºï¼‰ï¼š
# Architectures in the fat file: OMRONLib are: arm64

# è¾“å‡ºç¤ºä¾‹ï¼ˆçœŸæœº+æ¨¡æ‹Ÿå™¨ï¼‰ï¼š
# Architectures in the fat file: OMRONLib are: armv7 arm64 x86_64 arm64-simulator
```

#### æ­¥éª¤ 2: é…ç½® podspec

```ruby
# ios/omron_health_plugin.podspec
Pod::Spec.new do |s|
  s.name             = 'omron_health_plugin'
  s.version          = '0.0.1'
  s.summary          = 'A Flutter plugin for OMRON health devices'
  s.description      = <<-DESC
    A Flutter plugin for integrating OMRON health devices via Bluetooth.
    Supports device scanning, pairing, and data synchronization.
                       DESC
  s.homepage         = 'https://github.com/zhoujianshun/omron_health_plugin'
  s.license          = { :file => '../LICENSE' }
  s.author           = { 'Your Name' => 'your.email@example.com' }
  s.source           = { :path => '.' }
  
  # æºä»£ç æ–‡ä»¶
  s.source_files = 'Classes/**/*'
  
  # Flutter ä¾èµ–
  s.dependency 'Flutter'
  
  # å¹³å°è¦æ±‚
  s.platform = :ios, '13.0'
  s.swift_version = '5.0'
  
  # â­â­â­ å…³é”®é…ç½®ï¼šå¼•å…¥ Framework â­â­â­
  s.vendored_frameworks = 'Frameworks/OMRONLib.framework'
  
  # â­ Pod Target ç¼–è¯‘é…ç½®
  s.pod_target_xcconfig = { 
    'DEFINES_MODULE' => 'YES',                           # å®šä¹‰æ¨¡å—
    'EXCLUDED_ARCHS[sdk=iphonesimulator*]' => 'i386',   # æ’é™¤32ä½æ¨¡æ‹Ÿå™¨
    'ENABLE_BITCODE' => 'NO',                            # ç¦ç”¨Bitcodeï¼ˆOMRON SDKä¸æ”¯æŒï¼‰
    'CLANG_ALLOW_NON_MODULAR_INCLUDES_IN_FRAMEWORK_MODULES' => 'YES'  # å…è®¸éæ¨¡å—åŒ–å¯¼å…¥
  }
  
  # â­ User Target é“¾æ¥é…ç½®
  s.user_target_xcconfig = { 
    'OTHER_LDFLAGS' => '-framework OMRONLib'  # é“¾æ¥ Framework
  }
end
```

**é…ç½®è¯´æ˜ï¼š**

| é…ç½®é¡¹ | ä½œç”¨ | è¯´æ˜ |
|--------|------|------|
| `vendored_frameworks` | æŒ‡å®šç¬¬ä¸‰æ–¹ Framework è·¯å¾„ | ç›¸å¯¹äº podspec çš„è·¯å¾„ |
| `ENABLE_BITCODE = NO` | ç¦ç”¨ Bitcode | OMRON SDK ä¸æ”¯æŒ Bitcode |
| `EXCLUDED_ARCHS` | æ’é™¤ç‰¹å®šæ¶æ„ | å¦‚æœ Framework ä¸æ”¯æŒæ¨¡æ‹Ÿå™¨ |
| `OTHER_LDFLAGS` | é“¾æ¥æ ‡å¿— | ç¡®ä¿æ­£ç¡®é“¾æ¥ Framework |

#### æ­¥éª¤ 3: åœ¨ Swift ä»£ç ä¸­ä½¿ç”¨

```swift
// ios/Classes/OmronHealthPlugin.swift
import Flutter
import UIKit
import OMRONLib  // â­ å¯¼å…¥ Framework

public class OmronHealthPlugin: NSObject, FlutterPlugin {
    private var omronLib: OMRONLib?
    
    // åˆå§‹åŒ– SDK
    public func initSdk(result: @escaping FlutterResult) {
        // ä½¿ç”¨ OMRON SDK
        omronLib = OMRONLib.shared
        omronLib?.initialize()
        
        result([
            "success": true,
            "message": "SDKåˆå§‹åŒ–æˆåŠŸ"
        ])
    }
    
    // æ³¨å†Œ SDK
    public func register(arguments: Any?, result: @escaping FlutterResult) {
        guard let args = arguments as? [String: Any],
              let appKey = args["appKey"] as? String,
              let packageName = args["packageName"] as? String,
              let packageSecret = args["packageSecret"] as? String else {
            result(FlutterError(code: "INVALID_ARGUMENTS", 
                               message: "å‚æ•°é”™è¯¯", 
                               details: nil))
            return
        }
        
        // è°ƒç”¨ OMRON SDK æ³¨å†Œæ–¹æ³•
        omronLib?.requestIdentifier(
            appKey: appKey,
            packageName: packageName,
            packageSecret: packageSecret,
            success: { 
                result([
                    "status": "success",
                    "message": "æ³¨å†ŒæˆåŠŸ"
                ])
            },
            failure: { errorMsg in
                result([
                    "status": "error",
                    "message": errorMsg ?? "æ³¨å†Œå¤±è´¥"
                ])
            }
        )
    }
}
```

#### æ­¥éª¤ 4: åˆ›å»ºéªŒè¯è„šæœ¬ï¼ˆå¯é€‰ï¼‰

```bash
# ios/check_framework.sh
#!/bin/bash

echo "ğŸ” æ£€æŸ¥ OMRONLib.framework é›†æˆçŠ¶æ€..."
echo ""

# æ£€æŸ¥ Frameworks ç›®å½•
if [ -d "Frameworks" ]; then
    echo "âœ… Frameworks ç›®å½•å­˜åœ¨"
else
    echo "âŒ Frameworks ç›®å½•ä¸å­˜åœ¨"
    exit 1
fi

# æ£€æŸ¥ Framework
if [ -d "Frameworks/OMRONLib.framework" ]; then
    echo "âœ… OMRONLib.framework å­˜åœ¨"
else
    echo "âŒ OMRONLib.framework ä¸å­˜åœ¨"
    exit 1
fi

# æ£€æŸ¥äºŒè¿›åˆ¶æ–‡ä»¶
if [ -f "Frameworks/OMRONLib.framework/OMRONLib" ]; then
    echo "âœ… Framework äºŒè¿›åˆ¶æ–‡ä»¶å­˜åœ¨"
    
    # æ£€æŸ¥æ¶æ„
    echo ""
    echo "ğŸ“± æ”¯æŒçš„æ¶æ„:"
    lipo -info Frameworks/OMRONLib.framework/OMRONLib
else
    echo "âŒ Framework äºŒè¿›åˆ¶æ–‡ä»¶ä¸å­˜åœ¨"
    exit 1
fi

# æ£€æŸ¥ podspec é…ç½®
if grep -q "vendored_frameworks.*OMRONLib.framework" omron_health_plugin.podspec; then
    echo ""
    echo "âœ… podspec å·²é…ç½® vendored_frameworks"
else
    echo ""
    echo "âŒ podspec æœªé…ç½® vendored_frameworks"
fi

echo ""
echo "ğŸ‰ æ£€æŸ¥å®Œæˆ!"
```

```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x ios/check_framework.sh

# è¿è¡Œæ£€æŸ¥
cd ios
./check_framework.sh
```

#### æ­¥éª¤ 5: å®‰è£…ä¾èµ–å¹¶éªŒè¯

```bash
# è¿›å…¥ç¤ºä¾‹é¡¹ç›®çš„ iOS ç›®å½•
cd example/ios

# æ¸…ç†æ—§çš„ä¾èµ–
rm -rf Pods Podfile.lock .symlinks

# é‡æ–°å®‰è£… Pod
pod install

# å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå°è¯•æ›´æ–° repo
# pod install --repo-update

# æ‰“å¼€ Xcode éªŒè¯
open Runner.xcworkspace
```

**åœ¨ Xcode ä¸­éªŒè¯ï¼š**
1. å±•å¼€ **Pods** â†’ **Development Pods** â†’ **omron_health_plugin**
2. æŸ¥çœ‹ **Frameworks** åˆ†ç»„ï¼Œåº”è¯¥èƒ½çœ‹åˆ° `OMRONLib.framework`
3. å°è¯•ç¼–è¯‘é¡¹ç›®ï¼ˆCmd + Bï¼‰

#### æ­¥éª¤ 6: ç¼–è¯‘æµ‹è¯•

```bash
# å›åˆ°ç¤ºä¾‹é¡¹ç›®æ ¹ç›®å½•
cd ..

# æ¸…ç†
flutter clean
flutter pub get

# ç¼–è¯‘ iOSï¼ˆéœ€è¦çœŸæœºï¼‰
flutter build ios --debug

# æˆ–è¿è¡Œåˆ°çœŸæœº
flutter run -d <your-iphone-device-id>
```

#### âš ï¸ iOS ç‰¹åˆ«æ³¨æ„äº‹é¡¹

##### 1. æ¨¡æ‹Ÿå™¨æ”¯æŒé—®é¢˜

**å¦‚æœ Framework ä¸æ”¯æŒæ¨¡æ‹Ÿå™¨ï¼š**

```ruby
# åœ¨ podspec ä¸­æ·»åŠ æ¶æ„æ’é™¤
s.pod_target_xcconfig = { 
  'EXCLUDED_ARCHS[sdk=iphonesimulator*]' => 'arm64 x86_64 i386'
}
```

**é”™è¯¯ç¤ºä¾‹ï¼š**
```
Building for iOS Simulator, but the linked framework 'OMRONLib.framework' 
was built for iOS. (in target 'omron_health_plugin' from project 'Pods')
```

**è§£å†³æ–¹æ¡ˆï¼š**
- ä½¿ç”¨çœŸå® iPhone/iPad è®¾å¤‡æµ‹è¯•
- æˆ–è”ç³» OMRON è·å–æ”¯æŒæ¨¡æ‹Ÿå™¨çš„ Framework

##### 2. çœŸæœºè°ƒè¯•é…ç½®

**é¦–æ¬¡è¿è¡Œéœ€è¦é…ç½®ç­¾åï¼š**

1. ç”¨æ•°æ®çº¿è¿æ¥ iPhone åˆ° Mac
2. æ‰“å¼€ Xcode: `open example/ios/Runner.xcworkspace`
3. é€‰æ‹© **Runner** é¡¹ç›®
4. **Signing & Capabilities** æ ‡ç­¾
5. å‹¾é€‰ "Automatically manage signing"
6. é€‰æ‹©ä½ çš„ Apple ID Teamï¼ˆå…è´¹è´¦å·ä¹Ÿå¯ä»¥ï¼‰

**åœ¨è®¾å¤‡ä¸Šä¿¡ä»»å¼€å‘è€…ï¼š**
- iPhone: è®¾ç½® â†’ é€šç”¨ â†’ VPNä¸è®¾å¤‡ç®¡ç†
- ç‚¹å‡»ä¿¡ä»»ä½ çš„å¼€å‘è€…åº”ç”¨

##### 3. Framework ç‰ˆæœ¬ç®¡ç†

ç”±äº Framework æ–‡ä»¶è¾ƒå¤§ï¼Œå»ºè®®ï¼š

```bash
# .gitignore
ios/Frameworks/*.framework
```

**å›¢é˜Ÿåä½œæ–¹æ¡ˆï¼š**
- å°† Framework ä¸Šä¼ åˆ°å†…éƒ¨æ–‡ä»¶æœåŠ¡å™¨
- åœ¨ README ä¸­æä¾›ä¸‹è½½é“¾æ¥
- ä½¿ç”¨è„šæœ¬è‡ªåŠ¨ä¸‹è½½ï¼ˆå¯é€‰ï¼‰

```bash
# ios/download_framework.sh
#!/bin/bash
if [ ! -d "Frameworks/OMRONLib.framework" ]; then
    echo "ä¸‹è½½ OMRONLib.framework..."
    curl -L "https://your-server.com/OMRONLib.framework.zip" -o framework.zip
    unzip framework.zip -d Frameworks/
    rm framework.zip
fi
```

---

### 2.3 æƒé™é…ç½®

#### Android æƒé™é…ç½®

```xml
<!-- android/src/main/AndroidManifest.xml -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="top.inomo.omron_health_plugin">
    
    <!-- â­ åŸºç¡€è“ç‰™æƒé™ -->
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    
    <!-- â­ Android 12+ (API 31+) æ–°è“ç‰™æƒé™ -->
    <uses-permission android:name="android.permission.BLUETOOTH_SCAN"
                     android:usesPermissionFlags="neverForLocation" />
    <uses-permission android:name="android.permission.BLUETOOTH_CONNECT" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADVERTISE" />
    
    <!-- â­ ä½ç½®æƒé™ï¼ˆè“ç‰™æ‰«æéœ€è¦ï¼‰ -->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    
    <!-- â­ è“ç‰™ LE ç‰¹æ€§å£°æ˜ -->
    <uses-feature android:name="android.hardware.bluetooth_le" 
                  android:required="true" />
</manifest>
```

**æƒé™è¯´æ˜ï¼š**

| æƒé™ | é€‚ç”¨ç‰ˆæœ¬ | ç”¨é€” |
|------|----------|------|
| `BLUETOOTH` | All | åŸºç¡€è“ç‰™åŠŸèƒ½ |
| `BLUETOOTH_ADMIN` | All | è“ç‰™ç®¡ç†ï¼ˆæ‰«æã€è¿æ¥ï¼‰ |
| `BLUETOOTH_SCAN` | API 31+ | æ‰«æè“ç‰™è®¾å¤‡ |
| `BLUETOOTH_CONNECT` | API 31+ | è¿æ¥è“ç‰™è®¾å¤‡ |
| `ACCESS_FINE_LOCATION` | All | ä½ç½®æƒé™ï¼ˆè“ç‰™æ‰«æå¿…éœ€ï¼‰ |

**è¿è¡Œæ—¶æƒé™ç”³è¯·ï¼š**

```dart
// åœ¨ Flutter ä¸­ç”³è¯·æƒé™ï¼ˆä½¿ç”¨ permission_handler åŒ…ï¼‰
import 'package:permission_handler/permission_handler.dart';

Future<bool> requestBluetoothPermissions() async {
  // Android 12+ éœ€è¦æ–°æƒé™
  if (Platform.isAndroid) {
    final androidInfo = await DeviceInfoPlugin().androidInfo;
    if (androidInfo.version.sdkInt >= 31) {
      await [
        Permission.bluetoothScan,
        Permission.bluetoothConnect,
        Permission.location,
      ].request();
    } else {
      await [
        Permission.bluetooth,
        Permission.location,
      ].request();
    }
  }
  
  return await Permission.bluetooth.isGranted;
}
```

#### iOS æƒé™é…ç½®

```xml
<!-- ios/Runner/Info.plist -->
<dict>
    <!-- â­ è“ç‰™æƒé™è¯´æ˜ -->
    <key>NSBluetoothAlwaysUsageDescription</key>
    <string>éœ€è¦ä½¿ç”¨è“ç‰™è¿æ¥ OMRON å¥åº·è®¾å¤‡ï¼Œä»¥åŒæ­¥æ‚¨çš„å¥åº·æ•°æ®</string>
    
    <key>NSBluetoothPeripheralUsageDescription</key>
    <string>éœ€è¦ä½¿ç”¨è“ç‰™è¿æ¥ OMRON å¥åº·è®¾å¤‡</string>
    
    <!-- â­ ä½ç½®æƒé™è¯´æ˜ï¼ˆè“ç‰™æ‰«æéœ€è¦ï¼‰ -->
    <key>NSLocationWhenInUseUsageDescription</key>
    <string>éœ€è¦ä½ç½®æƒé™ä»¥æ‰«æé™„è¿‘çš„å¥åº·è®¾å¤‡</string>
    
    <key>NSLocationAlwaysUsageDescription</key>
    <string>éœ€è¦ä½ç½®æƒé™ä»¥æ‰«æé™„è¿‘çš„å¥åº·è®¾å¤‡</string>
</dict>
```

**æƒé™è¯´æ˜ï¼š**

| Key | ç”¨é€” | å¿…éœ€æ€§ |
|-----|------|--------|
| `NSBluetoothAlwaysUsageDescription` | iOS 13+ è“ç‰™æƒé™ | å¿…éœ€ |
| `NSBluetoothPeripheralUsageDescription` | iOS 12 åŠä»¥ä¸‹è“ç‰™æƒé™ | å…¼å®¹æ—§ç‰ˆæœ¬ |
| `NSLocationWhenInUseUsageDescription` | ä½¿ç”¨æœŸé—´ä½ç½®æƒé™ | è“ç‰™æ‰«æå¿…éœ€ |

**iOS è‡ªåŠ¨ç”³è¯·æƒé™ï¼š**

iOS ä¼šåœ¨é¦–æ¬¡ä½¿ç”¨è“ç‰™åŠŸèƒ½æ—¶è‡ªåŠ¨å¼¹å‡ºæƒé™è¯·æ±‚å¯¹è¯æ¡†ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ã€‚

---

## ä¸‰ã€æ’ä»¶å‘å¸ƒæµç¨‹

### 3.1 å‘å¸ƒå‰å‡†å¤‡

#### 1. å®Œå–„ pubspec.yaml

```yaml
# pubspec.yaml
name: omron_health_plugin
description: "A Flutter plugin for integrating OMRON health devices (blood pressure monitors, etc.) via Bluetooth. Supports device scanning, pairing, and data synchronization."
version: 0.0.1
homepage: https://github.com/zhoujianshun/omron_health_plugin
repository: https://github.com/zhoujianshun/omron_health_plugin
issue_tracker: https://github.com/zhoujianshun/omron_health_plugin/issues

environment:
  sdk: ^3.9.2
  flutter: '>=3.3.0'

dependencies:
  flutter:
    sdk: flutter
  plugin_platform_interface: ^2.0.2

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^5.0.0

flutter:
  plugin:
    platforms:
      android:
        package: top.inomo.omron_health_plugin
        pluginClass: OmronHealthPlugin
      ios:
        pluginClass: OmronHealthPlugin
```

**å…³é”®å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µ | ä½œç”¨ | ç¤ºä¾‹ |
|------|------|------|
| `name` | æ’ä»¶åç§°ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ | omron_health_plugin |
| `description` | ç®€çŸ­æè¿°ï¼ˆ60-180å­—ç¬¦ï¼‰ | ç”¨äº pub.dev æœç´¢ |
| `version` | ç‰ˆæœ¬å·ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰ | 0.0.1 |
| `homepage` | é¡¹ç›®ä¸»é¡µ | GitHub åœ°å€ |
| `repository` | ä»£ç ä»“åº“ | GitHub ä»“åº“ |
| `issue_tracker` | é—®é¢˜è¿½è¸ª | GitHub Issues |

#### 2. å®Œå–„ README.md

**å¿…é¡»åŒ…å«çš„å†…å®¹ï¼š**

```markdown
# omron_health_plugin

[![pub package](https://img.shields.io/pub/v/omron_health_plugin.svg)](https://pub.dev/packages/omron_health_plugin)

ç®€çŸ­çš„ä¸€å¥è¯æè¿°

## åŠŸèƒ½ç‰¹æ€§

- âœ¨ ä¸»è¦åŠŸèƒ½ 1
- âœ¨ ä¸»è¦åŠŸèƒ½ 2

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

\`\`\`yaml
dependencies:
  omron_health_plugin: ^0.0.1
\`\`\`

### åŸºæœ¬ä½¿ç”¨

\`\`\`dart
import 'package:omron_health_plugin/omron_health_plugin.dart';

// ç¤ºä¾‹ä»£ç 
\`\`\`

## å¹³å°é…ç½®

### Android

é…ç½®è¯´æ˜...

### iOS

é…ç½®è¯´æ˜...

## API æ–‡æ¡£

è¯¦ç»† API åˆ—è¡¨...

## å¸¸è§é—®é¢˜

Q: é—®é¢˜1ï¼Ÿ
A: è§£ç­”1...

## è®¸å¯è¯

MIT License
```

**README æ£€æŸ¥æ¸…å•ï¼š**
- âœ… å¾½ç« ï¼ˆpub versionï¼‰
- âœ… ç®€æ´çš„åŠŸèƒ½ä»‹ç»
- âœ… å®Œæ•´çš„å®‰è£…æ­¥éª¤
- âœ… å¯è¿è¡Œçš„ç¤ºä¾‹ä»£ç 
- âœ… å¹³å°ç‰¹å®šé…ç½®
- âœ… API æ–‡æ¡£é“¾æ¥
- âœ… å¸¸è§é—®é¢˜è§£ç­”
- âœ… è®¸å¯è¯ä¿¡æ¯

#### 3. ç¼–å†™ CHANGELOG.md

```markdown
# CHANGELOG

## 0.0.1 - 2025-01-20

### æ–°å¢åŠŸèƒ½
- âœ… Android å’Œ iOS å¹³å°æ”¯æŒ
- âœ… è®¾å¤‡æ‰«æåŠŸèƒ½ï¼ˆç»‘å®šæ‰«æã€åŒæ­¥æ‰«æï¼‰
- âœ… è¡€å‹è®¡è®¾å¤‡ç»‘å®š
- âœ… è¡€å‹æ•°æ®åŒæ­¥
- âœ… è¿æ¥çŠ¶æ€å®æ—¶ç›‘å¬
- âœ… å®Œæ•´çš„ç¤ºä¾‹åº”ç”¨

### å·²çŸ¥é—®é¢˜
- iOS ç«¯æ— æ³•ç»‘å®šè®¾å¤‡ï¼ˆSDK é—®é¢˜ï¼Œå¾…å®˜æ–¹ä¿®å¤ï¼‰
- iOS Framework ä¸æ”¯æŒæ¨¡æ‹Ÿå™¨

### ä¾èµ–
- Flutter SDK: >=3.3.0
- Android: minSdk 24
- iOS: 13.0+
```

**ç‰ˆæœ¬å·è§„åˆ™ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰ï¼š**
- `MAJOR.MINOR.PATCH` (ä¾‹å¦‚ 1.2.3)
- **MAJOR**: ä¸å…¼å®¹çš„ API å˜æ›´
- **MINOR**: å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢
- **PATCH**: å‘åå…¼å®¹çš„é—®é¢˜ä¿®å¤

#### 4. æ·»åŠ  LICENSE æ–‡ä»¶

```
MIT License

Copyright (c) 2025 Your Name

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

#### 5. ä»£ç è´¨é‡æ£€æŸ¥

```bash
# ä»£ç é™æ€åˆ†æ
flutter analyze

# å¦‚æœæœ‰é”™è¯¯æˆ–è­¦å‘Šï¼Œä¿®å¤å®ƒä»¬
# æ’ä»¶å‘å¸ƒè¦æ±‚é›¶é”™è¯¯é›¶è­¦å‘Š

# ä»£ç æ ¼å¼åŒ–
flutter format .

# è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœæœ‰ï¼‰
flutter test

# æ£€æŸ¥ä¾èµ–
flutter pub get
```

**å¸¸è§é—®é¢˜ä¿®å¤ï¼š**

```bash
# ä¿®å¤æ ¼å¼é—®é¢˜
flutter format .

# ä¿®å¤å¯¼å…¥é¡ºåº
flutter analyze --fix

# æ›´æ–°ä¾èµ–
flutter pub upgrade
```

### 3.2 é…ç½®å‘å¸ƒæ–‡ä»¶

#### 1. åˆ›å»º .gitignore

```
# Flutter æ„å»ºäº§ç‰©
.dart_tool/
.flutter-plugins
.flutter-plugins-dependencies
.packages
build/

# IDE
.idea/
.vscode/
*.iml
*.swp

# å¤§å‹ SDK æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
ios/Frameworks/*.framework
android/libs/*.jar

# æœ¬åœ°é…ç½®
.env
local.properties
```

#### 2. åˆ›å»º .pubignore

**.pubignore** ç”¨äºæ’é™¤ä¸éœ€è¦å‘å¸ƒåˆ° pub.dev çš„æ–‡ä»¶ï¼š

```
# ç¤ºä¾‹é¡¹ç›®
example/

# æ–‡æ¡£
docs/
*.md
!README.md
!CHANGELOG.md

# IDE é…ç½®
.vscode/
.idea/
*.iml

# å¼€å‘å·¥å…·
.github/
scripts/

# æµ‹è¯•æ–‡ä»¶
test/
```

**æ³¨æ„ï¼š**
- `.pubignore` ç±»ä¼¼äº `.gitignore`
- é»˜è®¤ä¼šåŒ…å«æ‰€æœ‰ Git è·Ÿè¸ªçš„æ–‡ä»¶
- ä½¿ç”¨ `.pubignore` å¯ä»¥è¿›ä¸€æ­¥æ’é™¤

### 3.3 é¢„å‘å¸ƒæ£€æŸ¥

```bash
# è¿›å…¥æ’ä»¶æ ¹ç›®å½•
cd omron_health_plugin

# æ‰§è¡Œé¢„å‘å¸ƒæ£€æŸ¥ï¼ˆdry-runï¼‰
flutter pub publish --dry-run
```

**æ£€æŸ¥è¾“å‡ºå†…å®¹ï¼š**

```
Publishing omron_health_plugin 0.0.1 to https://pub.dev:

Package validation found the following potential issues:
* Your package has no description.
  Add a description in pubspec.yaml.

Files:
|-- LICENSE
|-- README.md
|-- CHANGELOG.md
|-- pubspec.yaml
|-- lib/
|   |-- omron_health_plugin.dart
|   |-- omron_health_plugin_platform_interface.dart
|   |-- omron_health_plugin_method_channel.dart
|   |-- omron/
|       |-- omron_config.dart
|       |-- omron_result.dart
|       |-- ...
|-- android/
|   |-- build.gradle
|   |-- src/
|       |-- main/
|           |-- kotlin/
|               |-- ...
|-- ios/
    |-- Classes/
    |   |-- OmronHealthPlugin.swift
    |-- omron_health_plugin.podspec

Package has 0 warnings.
```

**æ£€æŸ¥è¦ç‚¹ï¼š**
- âœ… æ— é”™è¯¯å’Œè­¦å‘Š
- âœ… æ–‡ä»¶åˆ—è¡¨æ­£ç¡®
- âœ… æ’é™¤äº†ä¸å¿…è¦çš„æ–‡ä»¶
- âœ… åŒ…å«äº†å¿…è¦çš„æ–‡ä»¶ï¼ˆLICENSE, README, CHANGELOGï¼‰

**å¸¸è§è­¦å‘Šä¿®å¤ï¼š**

| è­¦å‘Š | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| No description | ç¼ºå°‘æè¿° | åœ¨ pubspec.yaml æ·»åŠ  description |
| No homepage | ç¼ºå°‘ä¸»é¡µ | æ·»åŠ  homepage å­—æ®µ |
| Depends on unpublished packages | ä¾èµ–æœªå‘å¸ƒçš„åŒ… | æ£€æŸ¥ dependencies |
| SDK constraint too wide | SDK ç‰ˆæœ¬èŒƒå›´è¿‡å®½ | æ˜ç¡®æŒ‡å®šç‰ˆæœ¬èŒƒå›´ |

### 3.4 æ­£å¼å‘å¸ƒ

#### é¦–æ¬¡å‘å¸ƒæµç¨‹

```bash
# 1. ç¡®ä¿å·²ç™»å½• pub.devï¼ˆé¦–æ¬¡éœ€è¦ï¼‰
flutter pub login

# ç³»ç»Ÿä¼šæç¤ºï¼š
# Please open the following URL in a browser:
# https://accounts.google.com/o/oauth2/auth?...

# 2. åœ¨æµè§ˆå™¨ä¸­æˆæƒ
# ä½¿ç”¨ Google è´¦å·ç™»å½•å¹¶æˆæƒ

# 3. æˆæƒæˆåŠŸåè¿”å›ç»ˆç«¯

# 4. å‘å¸ƒæ’ä»¶
flutter pub publish

# ç³»ç»Ÿä¼šå†æ¬¡æ˜¾ç¤ºè¦å‘å¸ƒçš„å†…å®¹ï¼Œç¡®è®¤ï¼š
# Publishing omron_health_plugin 0.0.1 to https://pub.dev:
# ...
# Do you want to publish omron_health_plugin 0.0.1 to https://pub.dev? (y/N): y
# flutter pub publish --server=https://pub.dev å‘ä¸åˆ°æŒ‡å®šæœåŠ¡å™¨

# 5. è¾“å…¥ 'y' ç¡®è®¤

# 6. å‘å¸ƒæˆåŠŸ
# Successfully uploaded package.
```

#### å‘å¸ƒåéªŒè¯

```bash
# 1. è®¿é—®æ’ä»¶é¡µé¢
open https://pub.dev/packages/omron_health_plugin

# 2. åœ¨æ–°é¡¹ç›®ä¸­æµ‹è¯•å®‰è£…
flutter create test_project
cd test_project
flutter pub add omron_health_plugin

# 3. éªŒè¯å®‰è£…æˆåŠŸ
flutter pub get
```

**pub.dev é¡µé¢æ£€æŸ¥ï¼š**
- âœ… ç‰ˆæœ¬ä¿¡æ¯æ­£ç¡®
- âœ… æè¿°å®Œæ•´æ˜¾ç¤º
- âœ… README æ­£ç¡®æ¸²æŸ“
- âœ… ç¤ºä¾‹ä»£ç é«˜äº®æ˜¾ç¤º
- âœ… API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ
- âœ… åˆ†æ•°è¯„çº§ï¼ˆpub pointsï¼‰

### 3.5 ç‰ˆæœ¬æ›´æ–°æµç¨‹

```bash
# 1. ä¿®æ”¹ä»£ç å¹¶æµ‹è¯•

# 2. æ›´æ–°ç‰ˆæœ¬å·
# ç¼–è¾‘ pubspec.yaml
# version: 0.0.1 -> version: 0.0.2

# 3. æ›´æ–° CHANGELOG.md
## 0.0.2 - 2025-01-25

### æ–°å¢
- æ–°å¢ XX åŠŸèƒ½

### ä¿®å¤
- ä¿®å¤ XX é—®é¢˜

### å˜æ›´
- ä¼˜åŒ– XX æ€§èƒ½

# 4. æäº¤ä»£ç åˆ° Git
git add .
git commit -m "Release v0.0.2: æ–°å¢XXåŠŸèƒ½ï¼Œä¿®å¤XXé—®é¢˜"
git tag v0.0.2
git push origin main --tags

# 5. é¢„å‘å¸ƒæ£€æŸ¥
flutter pub publish --dry-run

# 6. å‘å¸ƒæ–°ç‰ˆæœ¬
flutter pub publish

# 7. éªŒè¯æ–°ç‰ˆæœ¬
open https://pub.dev/packages/omron_health_plugin/versions
```

**ç‰ˆæœ¬æ›´æ–°æœ€ä½³å®è·µï¼š**

1. **è¡¥ä¸ç‰ˆæœ¬** (0.0.1 â†’ 0.0.2)
   - Bug ä¿®å¤
   - æ–‡æ¡£æ›´æ–°
   - æ€§èƒ½ä¼˜åŒ–

2. **æ¬¡ç‰ˆæœ¬** (0.0.2 â†’ 0.1.0)
   - æ–°å¢åŠŸèƒ½
   - å‘åå…¼å®¹

3. **ä¸»ç‰ˆæœ¬** (0.1.0 â†’ 1.0.0)
   - ç ´åæ€§å˜æ›´
   - API é‡æ„

### 3.6 å‘å¸ƒæ’¤å›ï¼ˆæ…ç”¨ï¼‰

```bash
# æ’¤å›æœ€æ–°ç‰ˆæœ¬ï¼ˆå‘å¸ƒå 7 å¤©å†…ï¼‰
flutter pub downgrade omron_health_plugin

# æ³¨æ„ï¼š
# - åªèƒ½æ’¤å› 7 å¤©å†…çš„ç‰ˆæœ¬
# - æ’¤å›åæ— æ³•å†æ¬¡å‘å¸ƒç›¸åŒç‰ˆæœ¬å·
# - å»ºè®®å‘å¸ƒå‰å……åˆ†æµ‹è¯•ï¼Œé¿å…æ’¤å›
```

---

## å››ã€å®Œæ•´å¼€å‘å·¥ä½œæµæ€»ç»“

### 4.1 åˆå§‹åŒ–é˜¶æ®µ

```
1. åˆ›å»ºæ’ä»¶é¡¹ç›®
   flutter create --template=plugin omron_health_plugin
   â†“
2. è®¾è®¡æ¥å£å±‚
   å®šä¹‰ PlatformInterface æŠ½è±¡ç±»
   â†“
3. æ­å»ºé€šä¿¡å±‚
   å®ç° MethodChannel å’Œ EventChannel
   â†“
4. åˆ›å»ºæ•°æ®æ¨¡å‹
   å®šä¹‰ Dart ç±»ï¼ˆConfig, Result, Event ç­‰ï¼‰
```

### 4.2 å¼€å‘é˜¶æ®µ

```
5. Android åŸç”Ÿå¼€å‘
   - é›†æˆ OmronBleSdk.jar
   - å®ç° MethodCallHandler
   - å®ç° StreamHandler
   - è°ƒç”¨ SDK API
   â†“
6. iOS åŸç”Ÿå¼€å‘
   - é›†æˆ OMRONLib.framework
   - å®ç° FlutterPlugin
   - å®ç° FlutterStreamHandler
   - è°ƒç”¨ SDK API
   â†“
7. æƒé™é…ç½®
   - AndroidManifest.xml
   - Info.plist
   â†“
8. åœ¨ example ä¸­æµ‹è¯•
   - ç¼–å†™æµ‹è¯•ç”¨ä¾‹
   - çœŸæœºæµ‹è¯•
   - éªŒè¯åŠŸèƒ½å®Œæ•´æ€§
```

### 4.3 æ–‡æ¡£é˜¶æ®µ

```
9. ç¼–å†™ README.md
   - åŠŸèƒ½ä»‹ç»
   - å¿«é€Ÿå¼€å§‹
   - API æ–‡æ¡£
   - å¸¸è§é—®é¢˜
   â†“
10. ç¼–å†™ CHANGELOG.md
    - ç‰ˆæœ¬å†å²
    - åŠŸèƒ½å˜æ›´
    - å·²çŸ¥é—®é¢˜
    â†“
11. æ·»åŠ  LICENSE
    - é€‰æ‹©åˆé€‚çš„å¼€æºåè®®
    - MIT / Apache 2.0 ç­‰
```

### 4.4 å‘å¸ƒé˜¶æ®µ

```
12. ä»£ç è´¨é‡æ£€æŸ¥
    flutter analyze
    flutter format
    flutter test
    â†“
13. é¢„å‘å¸ƒæ£€æŸ¥
    flutter pub publish --dry-run
    â†“
14. ä¿®å¤é—®é¢˜
    è§£å†³è­¦å‘Šå’Œé”™è¯¯
    â†“
15. æ­£å¼å‘å¸ƒ
    flutter pub publish
    â†“
16. éªŒè¯å‘å¸ƒ
    åœ¨ pub.dev ä¸ŠæŸ¥çœ‹
    æ–°é¡¹ç›®ä¸­æµ‹è¯•å®‰è£…
```

### 4.5 ç»´æŠ¤é˜¶æ®µ

```
17. æ”¶é›†åé¦ˆ
    - GitHub Issues
    - pub.dev è¯„è®º
    â†“
18. ä¿®å¤ Bug
    - ä¿®æ”¹ä»£ç 
    - å¢åŠ æµ‹è¯•
    â†“
19. å‘å¸ƒæ›´æ–°
    - æ›´æ–°ç‰ˆæœ¬å·
    - æ›´æ–° CHANGELOG
    - é‡æ–°å‘å¸ƒ
```

---

## äº”ã€å…³é”®æ³¨æ„äº‹é¡¹

### 5.1 é€šé“å‘½åè§„èŒƒ

**å‘½åæ ¼å¼ï¼š** ä½¿ç”¨åå‘åŸŸåæ ¼å¼

```dart
// âœ… æ¨è
"com.yourcompany.yourplugin/method_channel"
"com.yourcompany.yourplugin/event_channel"

// âŒ ä¸æ¨è
"my_channel"
"channel1"
```

**è§„åˆ™ï¼š**
1. Method Channel å’Œ Event Channel åç§°**ä¸èƒ½é‡å¤**
2. Dartã€Androidã€iOS ä¸‰ç«¯é€šé“åç§°å¿…é¡»**å®Œå…¨ä¸€è‡´**
3. ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼Œä¾¿äºè°ƒè¯•

**ç¤ºä¾‹ï¼š**
```dart
// Dart å±‚
const METHOD_CHANNEL = "top.inomo.omron_health_plugin/omron";
const STATUS_EVENT_CHANNEL = "top.inomo.omron_health_plugin/omron_status";
const SCAN_EVENT_CHANNEL = "top.inomo.omron_health_plugin/omron_scan";
```

```kotlin
// Android å±‚
private const val METHOD_CHANNEL_NAME = "top.inomo.omron_health_plugin/omron"
private const val STATUS_EVENT_CHANNEL_NAME = "top.inomo.omron_health_plugin/omron_status"
private const val SCAN_EVENT_CHANNEL_NAME = "top.inomo.omron_health_plugin/omron_scan"
```

```swift
// iOS å±‚
private let METHOD_CHANNEL_NAME = "top.inomo.omron_health_plugin/omron"
private let STATUS_EVENT_CHANNEL_NAME = "top.inomo.omron_health_plugin/omron_status"
private let SCAN_EVENT_CHANNEL_NAME = "top.inomo.omron_health_plugin/omron_scan"
```

### 5.2 æ•°æ®åºåˆ—åŒ–

**æ”¯æŒçš„ç±»å‹ï¼š**

Dart ä¸ Native ä¹‹é—´åªèƒ½ä¼ é€’ä»¥ä¸‹ç±»å‹ï¼š

| Dart | Android | iOS |
|------|---------|-----|
| `null` | `null` | `nil` |
| `bool` | `Boolean` | `NSNumber` |
| `int` | `Integer` | `NSNumber` |
| `double` | `Double` | `NSNumber` |
| `String` | `String` | `NSString` |
| `List` | `ArrayList` | `NSArray` |
| `Map` | `HashMap` | `NSDictionary` |

**å¤æ‚å¯¹è±¡åºåˆ—åŒ–ï¼š**

```dart
// Dart æ•°æ®æ¨¡å‹
class OmronConfig {
  final String appKey;
  final String packageName;
  final String packageSecret;
  
  // â­ è½¬æ¢ä¸º Map
  Map<String, dynamic> toMap() {
    return {
      'appKey': appKey,
      'packageName': packageName,
      'packageSecret': packageSecret,
    };
  }
  
  // â­ ä» Map åˆ›å»º
  factory OmronConfig.fromMap(Map<String, dynamic> map) {
    return OmronConfig(
      appKey: map['appKey'] as String,
      packageName: map['packageName'] as String,
      packageSecret: map['packageSecret'] as String,
    );
  }
}
```

```kotlin
// Android æ¥æ”¶ Map
val params = call.arguments as? Map<String, Any?>
val appKey = params?.get("appKey") as? String
val packageName = params?.get("packageName") as? String
val packageSecret = params?.get("packageSecret") as? String

// Android è¿”å› Map
result.success(mapOf(
    "status" to "success",
    "message" to "æ“ä½œæˆåŠŸ",
    "data" to dataObject
))
```

```swift
// iOS æ¥æ”¶ Dictionary
guard let args = arguments as? [String: Any],
      let appKey = args["appKey"] as? String,
      let packageName = args["packageName"] as? String,
      let packageSecret = args["packageSecret"] as? String else {
    return
}

// iOS è¿”å› Dictionary
result([
    "status": "success",
    "message": "æ“ä½œæˆåŠŸ",
    "data": dataObject
])
```

### 5.3 çº¿ç¨‹å®‰å…¨

**å…³é”®åŸåˆ™ï¼š** æ‰€æœ‰ä¸ Flutter çš„é€šä¿¡å¿…é¡»åœ¨ä¸»çº¿ç¨‹

#### Android ä¸»çº¿ç¨‹å›è°ƒ

```kotlin
private val mainHandler = Handler(Looper.getMainLooper())

// âœ… æ­£ç¡®ï¼šåœ¨ä¸»çº¿ç¨‹å›è°ƒ
OMRONLib.getInstance().someAsyncMethod { data ->
    mainHandler.post {
        eventSink?.success(data)
    }
}

// âŒ é”™è¯¯ï¼šåœ¨å­çº¿ç¨‹å›è°ƒï¼ˆå¯èƒ½å¯¼è‡´å´©æºƒï¼‰
OMRONLib.getInstance().someAsyncMethod { data ->
    eventSink?.success(data)  // å±é™©ï¼
}
```

#### iOS ä¸»çº¿ç¨‹å›è°ƒ

```swift
// âœ… æ­£ç¡®ï¼šåœ¨ä¸»çº¿ç¨‹å›è°ƒ
OMRONLib.shared.someAsyncMethod { [weak self] data in
    DispatchQueue.main.async {
        self?.eventSink?(data)
    }
}

// âŒ é”™è¯¯ï¼šåœ¨å­çº¿ç¨‹å›è°ƒ
OMRONLib.shared.someAsyncMethod { [weak self] data in
    self?.eventSink?(data)  // å±é™©ï¼
}
```

### 5.4 å†…å­˜ç®¡ç†

#### Android èµ„æºæ¸…ç†

```kotlin
class OmronPlugin : FlutterPlugin, MethodCallHandler {
    private var methodChannel: MethodChannel? = null
    private var eventSink: EventChannel.EventSink? = null
    
    override fun onDetachedFromEngine(binding: FlutterPluginBinding) {
        // â­ æ¸…ç†é€šé“
        methodChannel?.setMethodCallHandler(null)
        methodChannel = null
        
        // â­ æ¸…ç†äº‹ä»¶å‘é€å™¨
        eventSink = null
        
        // â­ åœæ­¢ SDK æ“ä½œ
        OMRONLib.getInstance().stopScan()
    }
}
```

#### iOS èµ„æºæ¸…ç†

```swift
public class OmronHealthPlugin: NSObject, FlutterPlugin, FlutterStreamHandler {
    private var eventSink: FlutterEventSink?
    
    // EventChannel å–æ¶ˆæ—¶æ¸…ç†
    public func onCancel(withArguments arguments: Any?) -> FlutterError? {
        // â­ æ¸…ç†äº‹ä»¶å‘é€å™¨
        eventSink = nil
        
        // â­ åœæ­¢ SDK æ“ä½œ
        OMRONLib.shared.stopScan()
        
        return nil
    }
    
    // â­ ä½¿ç”¨ weak self é¿å…å¾ªç¯å¼•ç”¨
    private func someMethod() {
        OMRONLib.shared.doSomething { [weak self] result in
            guard let self = self else { return }
            self.eventSink?(result)
        }
    }
}
```

#### Dart å±‚èµ„æºæ¸…ç†

```dart
class MyWidget extends StatefulWidget {
  @override
  _MyWidgetState createState() => _MyWidgetState();
}

class _MyWidgetState extends State<MyWidget> {
  StreamSubscription? _scanSubscription;
  
  void startScan() {
    // â­ ä¿å­˜è®¢é˜…å¼•ç”¨
    _scanSubscription = OmronHealthPlugin.instance
        .startBindScan(OmronDeviceCategory.bloodPressure)
        .listen((event) {
      // å¤„ç†äº‹ä»¶
    });
  }
  
  @override
  void dispose() {
    // â­ å–æ¶ˆè®¢é˜…
    _scanSubscription?.cancel();
    _scanSubscription = null;
    
    // â­ åœæ­¢æ‰«æ
    OmronHealthPlugin.instance.stopScan();
    
    super.dispose();
  }
}
```

### 5.5 é”™è¯¯å¤„ç†

#### Dart å±‚é”™è¯¯å¤„ç†

```dart
try {
  final result = await OmronHealthPlugin.instance.register(config);
  if (result.isSuccess) {
    print('æ³¨å†ŒæˆåŠŸ');
  } else {
    print('æ³¨å†Œå¤±è´¥: ${result.message}');
  }
} on PlatformException catch (e) {
  print('å¹³å°é”™è¯¯: ${e.code} - ${e.message}');
} catch (e) {
  print('æœªçŸ¥é”™è¯¯: $e');
}
```

#### Android é”™è¯¯è¿”å›

```kotlin
override fun onMethodCall(call: MethodCall, result: Result) {
    try {
        when (call.method) {
            "someMethod" -> {
                // å‚æ•°éªŒè¯
                val params = call.arguments as? Map<String, Any?>
                if (params == null) {
                    result.error(
                        "INVALID_ARGUMENTS",  // é”™è¯¯ç 
                        "å‚æ•°ä¸èƒ½ä¸ºç©º",         // é”™è¯¯æ¶ˆæ¯
                        null                   // è¯¦ç»†ä¿¡æ¯
                    )
                    return
                }
                
                // æ‰§è¡Œæ“ä½œ
                someMethod(params, result)
            }
        }
    } catch (e: Exception) {
        result.error(
            "OMRON_ERROR",
            "æ“ä½œå¤±è´¥: ${e.message}",
            null
        )
    }
}
```

#### iOS é”™è¯¯è¿”å›

```swift
public func handle(_ call: FlutterMethodCall, result: @escaping FlutterResult) {
    switch call.method {
    case "someMethod":
        guard let args = arguments as? [String: Any] else {
            result(FlutterError(
                code: "INVALID_ARGUMENTS",
                message: "å‚æ•°ä¸èƒ½ä¸ºç©º",
                details: nil
            ))
            return
        }
        
        someMethod(arguments: args, result: result)
    default:
        result(FlutterMethodNotImplemented)
    }
}
```

### 5.6 ç‰ˆæœ¬å…¼å®¹

#### å£°æ˜æœ€ä½ç‰ˆæœ¬

```yaml
# pubspec.yaml
environment:
  sdk: ^3.9.2           # Dart SDK ç‰ˆæœ¬
  flutter: '>=3.3.0'    # Flutter SDK ç‰ˆæœ¬
```

```gradle
// android/build.gradle
android {
    compileSdk = 36
    
    defaultConfig {
        minSdk = 24      // æœ€ä½ Android ç‰ˆæœ¬
        targetSdk = 36   // ç›®æ ‡ Android ç‰ˆæœ¬
    }
}
```

```ruby
# ios/omron_health_plugin.podspec
s.platform = :ios, '13.0'  # æœ€ä½ iOS ç‰ˆæœ¬
```

#### å¤„ç†ç‰ˆæœ¬å·®å¼‚

```kotlin
// Android å¤„ç†ç‰ˆæœ¬å·®å¼‚
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {
    // Android 12+ (API 31+) ä»£ç 
    requestBluetoothPermissions()
} else {
    // Android 11 åŠä»¥ä¸‹ä»£ç 
    requestLegacyBluetoothPermissions()
}
```

```swift
// iOS å¤„ç†ç‰ˆæœ¬å·®å¼‚
if #available(iOS 14.0, *) {
    // iOS 14+ ä»£ç 
} else {
    // iOS 13 ä»£ç 
}
```

### 5.7 è°ƒè¯•æŠ€å·§

#### å¯ç”¨è¯¦ç»†æ—¥å¿—

```dart
// Dart å±‚
debugPrint('[OmronPlugin] è°ƒç”¨æ–¹æ³•: ${call.method}');
debugPrint('[OmronPlugin] å‚æ•°: ${call.arguments}');
```

```kotlin
// Android å±‚
Log.d("OmronPlugin", "ğŸ”µ [Android] æ–¹æ³•è°ƒç”¨: ${call.method}")
Log.d("OmronPlugin", "ğŸ“¦ [Android] å‚æ•°: ${call.arguments}")
Log.d("OmronPlugin", "ğŸ“¤ [Android] è¿”å›ç»“æœ: $result")
```

```swift
// iOS å±‚
print("ğŸ”µ [iOS] æ–¹æ³•è°ƒç”¨: \(call.method)")
print("ğŸ“¦ [iOS] å‚æ•°: \(String(describing: call.arguments))")
print("ğŸ“¤ [iOS] è¿”å›ç»“æœ: \(result)")
```

#### æŸ¥çœ‹æ—¥å¿—

```bash
# Flutter æ—¥å¿—
flutter logs

# Android æ—¥å¿—ï¼ˆè¿‡æ»¤ï¼‰
adb logcat | grep OmronPlugin

# iOS æ—¥å¿—ï¼ˆXcodeï¼‰
# åœ¨ Xcode ä¸­: View â†’ Debug Area â†’ Activate Console
```

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Flutter æ’ä»¶å¼€å‘å®˜æ–¹æ–‡æ¡£](https://flutter.dev/docs/development/packages-and-plugins/developing-packages)
- [Platform Channels æ–‡æ¡£](https://flutter.dev/docs/development/platform-integration/platform-channels)
- [pub.dev å‘å¸ƒæŒ‡å—](https://dart.dev/tools/pub/publishing)

### OMRON SDK æ–‡æ¡£

- [OMRON Android SDK é›†æˆæ–‡æ¡£](https://public.omronhealthcare.com.cn/b2bsdk/doc/%E9%80%9A%E4%BF%A1SDK%20android%E9%9B%86%E6%88%90%E6%96%87%E6%A1%A3.html)
- [OMRON iOS SDK é›†æˆæ–‡æ¡£](https://public.omronhealthcare.com.cn/b2bsdk/doc/%E9%80%9A%E4%BF%A1SDK%20iOS%E9%9B%86%E6%88%90%E6%96%87%E6%A1%A3.html)

### é¡¹ç›®æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹_iOS.md](../å¿«é€Ÿå¼€å§‹_iOS.md) - iOS å¹³å°è¯¦ç»†é…ç½®æŒ‡å—
- [SETUP_iOS.md](../SETUP_iOS.md) - iOS Framework è®¾ç½®æŒ‡å—
- [README.md](../README.md) - æ’ä»¶ä½¿ç”¨è¯´æ˜
- [CHANGELOG.md](../CHANGELOG.md) - ç‰ˆæœ¬æ›´æ–°æ—¥å¿—

---

## ğŸ¯ æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†ä»é›¶å¼€å§‹å¼€å‘ Flutter æ’ä»¶çš„å®Œæ•´æµç¨‹ï¼š

1. **æ’ä»¶å¼€å‘æµç¨‹** - ä»åˆ›å»ºé¡¹ç›®åˆ°å®ç°å¹³å°æ¥å£
2. **SDK é›†æˆ** - Android JAR å’Œ iOS Framework é›†æˆæ–¹æ³•
3. **æƒé™é…ç½®** - Android å’Œ iOS æƒé™ç”³è¯·
4. **å‘å¸ƒæµç¨‹** - ä»å‡†å¤‡åˆ°æ­£å¼å‘å¸ƒçš„å®Œæ•´æ­¥éª¤
5. **æœ€ä½³å®è·µ** - é€šé“å‘½åã€æ•°æ®åºåˆ—åŒ–ã€çº¿ç¨‹å®‰å…¨ã€å†…å­˜ç®¡ç†ç­‰å…³é”®æ³¨æ„äº‹é¡¹

éµå¾ªè¿™äº›æ­¥éª¤å’Œæœ€ä½³å®è·µï¼Œæ‚¨å¯ä»¥å¼€å‘å‡ºé«˜è´¨é‡ã€æ˜“ç»´æŠ¤çš„ Flutter æ’ä»¶ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 1.0  
**æœ€åæ›´æ–°ï¼š** 2025-01-20  
**ä½œè€…ï¼š** OMRON Health Plugin Team
